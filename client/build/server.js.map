{"version":3,"sources":["../src/server.js"],"names":[],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,MAAM,EAAE,YAAY,EAAd,EAAkB,aAAa,GAA/B,EAAoC,MAApC,EAA4C,OAAO,SAAnD,EAA8D,gBAA9D,EAAgF,gBAAhF,KAAqG,iBAAO,MAAP,GAAgB,MAA3H;;AAEA,MAAM,MAAM,wBAAZ;;AAEA,IAAI,WAAW,SAAf,EAA0B;AACxB,MAAI,GAAJ,CAAQ,sBAAO,MAAP,CAAR;AACD;;AAED,IAAI,GAAJ,CAAQ,kBAAQ,MAAR,CAAe,eAAK,IAAL,CAAU,SAAV,EAAqB,eAArB,CAAf,CAAR;;AAEA,IAAI,GAAJ,CAAQ,GAAR,EAAa,CAAC,GAAD,EAAM,GAAN,KAAc;AACzB,MAAI,QAAJ,CAAa,eAAK,IAAL,CAAU,SAAV,EAAqB,eAArB,EAAsC,YAAtC,CAAb;AACD,CAFD;;AAIA,IAAI,GAAJ,CAAQ,IAAR,EAAc,CAAC,GAAD,EAAM,GAAN,KAAc;AAC1B,MAAI,QAAJ,CAAa,eAAK,IAAL,CAAU,SAAV,EAAqB,eAArB,EAAsC,YAAtC,CAAb;AACD,CAFD;;AAIA,eAAK,YAAL,CAAkB,CAAC,GAAD,EAAM,GAAN,KAAc;AAC9B,QAAM,WAAY,IAAI,OAAJ,CAAY,IAAZ,CAAiB,KAAjB,CAAuB,IAAvB,CAAD,GAAiC,IAAI,OAAJ,CAAY,IAAZ,CAAiB,KAAjB,CAAuB,CAAvB,EAA0B,IAAI,OAAJ,CAAY,IAAZ,CAAiB,OAAjB,CAAyB,GAAzB,CAA1B,CAAjC,GAA4F,IAAI,OAAJ,CAAY,IAAzH;AACA,QAAM,WAAY,WAAU,QAAS,IAAG,UAAW,GAAE,IAAI,GAAI,EAA7D;AACA,MAAI,SAAJ,CAAc,GAAd,EAAmB,EAAE,UAAU,QAAZ,EAAnB;AACA,MAAI,GAAJ;AACD,CALD,EAKG,MALH,CAKU,SALV,EAKqB,IALrB;;AAOA,gBAAM,YAAN,CAAmB;AACjB,OAAK,aAAG,YAAH,CAAgB,gBAAhB,CADY;AAEjB,QAAM,aAAG,YAAH,CAAgB,gBAAhB;AAFW,CAAnB,EAGG,GAHH,EAGQ,MAHR,CAGe,UAHf,EAG2B,IAH3B,EAGiC,MAAM;AACrC,UAAQ,GAAR,CAAa,iCAAgC,IAAK,IAAG,UAAW,GAAhE;AACD,CALD","file":"server.js","sourcesContent":["import express from 'express';\nimport path from 'path';\nimport dotenv from 'dotenv';\nimport logger from 'morgan';\nimport fs from 'fs';\nimport http from 'http';\nimport https from 'https';\n\nconst { HTTP_PORT = 80, HTTPS_PORT = 437, STATUS, HOST = '0.0.0.0', PRIVATE_KEY_FILE, CERTIFICATE_FILE } = dotenv.config().parsed;\n\nconst app = express();\n\nif (STATUS !== undefined) {\n  app.use(logger(STATUS));\n}\n\napp.use(express.static(path.join(__dirname, '../build/dist')));\n\napp.get('/', (req, res) => {\n  res.sendFile(path.join(__dirname, '../build/dist', 'index.html'));\n});\n\napp.get('/*', (req, res) => {\n  res.sendFile(path.join(__dirname, '../build/dist', 'index.html'));\n});\n\nhttp.createServer((req, res) => {\n  const hostname = (req.headers.host.match(/:/g)) ? req.headers.host.slice(0, req.headers.host.indexOf(':')) : req.headers.host;\n  const redirect = `https://${hostname}:${HTTPS_PORT}${req.url}`;\n  res.writeHead(301, { Location: redirect });\n  res.end();\n}).listen(HTTP_PORT, HOST);\n\nhttps.createServer({\n  key: fs.readFileSync(PRIVATE_KEY_FILE),\n  cert: fs.readFileSync(CERTIFICATE_FILE),\n}, app).listen(HTTPS_PORT, HOST, () => {\n  console.log(`Design Bright site running on ${HOST}:${HTTPS_PORT}.`);\n},\n);\n"]}